
# 基金趋势可视化与持仓管理工具

一款交互式的 Web 应用，旨在帮助用户跟踪、可视化、比较多支投资基金的历史表现，并管理个人持仓信息。

## 核心功能

- **[UI 优化] 隐私遮罩图表顶格显示**:
    - **暗黑模式适配 (最终版)**: 彻底修复了暗黑模式下折线图不可见的问题。采用“高对比度实色板”逻辑：在深色背景下，不再依赖半透明色，主线强制显示为 **纯白色 (#FFFFFF)**，历史数据线使用 **Slate (石板灰) 高亮梯次** 展示。
    - **指数级颜色衰减**: 隐私模式下的 **Mode 2 (历史成交额分析)**，颜色透明度遵循 **指数级衰减逻辑**。今日数据对比度最高，随着天数往回追溯，色彩呈指数级变淡，营造出清晰的视觉透视与重点。
    - **视觉细节微调**:
        - 背景参考线与历史线宽度统一为 **1px**，呈现极简精细感。
        - 核心实时数据线增强:
            - **Mode 0 & 1**: Zigzag 趋势骨架线宽度为 **1.5px**。
            - **Mode 2**: 今日实时成交额曲线宽度为 **1.5px**。
        - 调深了 **Mode 0 & 1** 中的指数背景线灰色（从 Slate 300 提升至 Slate 400），使其作为参考底纹更加清晰可辨。
        - **参考线极致统一**: 移除了垂直参考线的粗细区分，**所有模式下**的垂直标记线（无论是日间分割实线，还是盘中标记虚线）统一使用完全相同的色值，确保背景网格视觉逻辑的一致性，进一步突出实时数据折线。
    - **Mode 0 视觉降噪**: 历史对比模式下，所有指数折线统一使用 **深灰色辅助色** 背景显示，取消颜色衰减，以极简视觉突出 **Zigzag 趋势骨架线**。
    - **主题检测增强**: 结合 `MutationObserver` 与 `window.matchMedia`，实现系统级主题偏好与应用内暗黑模式切换的完美同步。
    - **时间轴对齐**: 实时上证指数从 **09:15** 竞价段开始记录数据；两市成交额从 **09:30** 开始累加。
    - **Zigzag 骨架线**: 
        - Mode 0 (历史对比) 包含 **0.15%** 阈值 Zigzag 趋势骨架线，线宽为 **1.5px**。
        - Mode 1 (今日分时) 包含 **0.1%** 阈值 Zigzag 趋势骨架线。渲染逻辑：线宽为 **1.5px**，且骨架线覆盖于指数背景线之 **上**。
    - **Mode 2 动态窗口**:
        - **盘中时段**: 起点动态设为 **当前时间-5分钟**（9:35前锁定9:30），终点锁定为 **15:00**，实现盘中高倍缩放观察。
        - **参考线**: 在 **11:30** 位置设有垂直**虚线**参考线，辅助判断午盘位置。
        - **视觉优化**: 移除了右侧成交额分布点容器的背景色，使其完全融入主题；优化了成交额分布点的色彩梯次。
        - **收盘时段 (15:00后)**: 起点回归 **09:30**，展示 09:30-15:00 全天量能分布。
    - **极简展示**: 移除图表交互游标与实时数值展示，使图表作为纯粹的视觉背景与持仓概况页脚配合。
    - **坐标轴优化**: 采用 `type="number"` 数值轴映射，彻底解决 Recharts 分类轴带来的边缘留白问题。
- **[收盘持久化] 完整行情存储**:
    - 每天 15:00 收盘后，系统将自动把包含 **09:15-15:00** 完整波动（约 250+ 数据点）的行情序列保存至 `localStorage`。
