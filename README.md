# 基金趋势可视化与持仓管理工具

一款交互式的 Web 应用，旨在帮助用户跟踪、可视化、比较多支投资基金的历史表现，并管理个人持仓信息。

## 核心功能

- **[数据增强] 大盘多维历史快照**:
    - **同步存储**: 每日收盘后（15:00），系统自动抓取并保存全市场（沪深两市）的分钟级数据曲线。
    - **三档交互图表**: 在隐私遮罩上方展示折线图，点击页面可按序循环切换：
        1. **指数连续模式**: 展示近 5 日与今日首尾相连的连续上证指数曲线。
        2. **今日分时模式**: 仅展示今日上证指数，采用固定全天时间轴（09:15-15:00），确保早盘期间图表不被拉伸，且两侧留有内边距。
        3. **成交对比模式**: 展示近 5 日与今日按时间轴对齐的重叠成交额曲线。
    - **水位分布指示器**: 在图表右侧常驻垂直进度条，以圆点实时标注今日与近 5 日同一时刻的累计成交额水位，量化市场热度。
    - **视觉优化**: 今日数据纯黑加粗，采用 Slate 极简色调，移除内外边距。
    - **时间校准**: 自动补齐 09:15 - 09:30 分时数据，成交额强制归零，确保对比逻辑严谨。
- **[UI 优化] 提示框视觉统一**:
    - 移除了基金走势图中 Tooltip 的所有灰色分割线，保持视觉一致性。
    - 自动移除日期中的时分显示，仅展示 YYYY-MM-DD。
- **[新交互] 折线图局部锚点对比**:
    - **极简操作**: 直接在任意基金的折线图上点击某个点，即可将其设为该基金的“基准日”。
    - **动态对比**: 设置基准后，Hover 图表其他点时，Tooltip 会实时显示“较基准涨跌”百分比。
- **[核心] 智能推荐评分系统 (Smart Opportunity Score)**:
    - 系统采用一套独特的**多因子加权算法**，为您提供量化的买卖建议。
    - **评分公式**: $$ Score = (50\% \times 估值分) + (30\% \times 趋势分) + (20\% \times 今日分) $$
- **[新功能] Gemini 智能投顾**:
    - 集成 Google Gemini 2.5 Flash 模型，深度结合 **4.5% 金字塔加仓策略**，提供基于全数据上下文的操作建议。

## 如何使用

1.  **添加基金**: 在页面底部的“基金代码”输入框中输入一个有效的6位基金代码。
2.  **录入持仓**: 双击基金行打开详情，输入份额与成本。
3.  **基准对比**: 在图表上点击一点作为基准，移动鼠标查看相对涨幅。
4.  **隐私保护**: 鼠标离开页面或长时间不操作将自动进入隐私遮罩模式。**单击页面**可循环切换大盘趋势，悬停可查看详细估值。双击页面可手动强制刷新。