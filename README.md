
# 基金趋势可视化与持仓管理工具

一款交互式的 Web 应用，旨在帮助用户跟踪、可视化、比较多支投资基金的历史表现，并管理个人持仓信息。

## 核心功能

- **[交互增强] 图表十字对齐引导 (Crosshair Guides)**:
    - **趋势起始锚点**: 自动在 Zigzag 的最后一个转折点（当前趋势的起点）显示一组**灰色虚线十字**。这为观察当前波段的起跌/起涨位置提供了直观的静态基准。
    - **悬停对齐预览**: 鼠标在基金趋势图上滑动时，会自动出现**水平和垂直**的灰色虚线。垂直线对齐日期，水平线对齐当前点净值，作为视觉上的十字对齐参考，帮助精准观察数据（光标保持常规样式）。
    - **点击锚定十字**: 点击图表中的任意点，将锁定一组持久的蓝色粗虚线十字。这使用户能以特定历史点为基准坐标系，直观观察其他日期的净值波动相对于该基准点在时间（X轴）和价格（Y轴）上的双重关系。
- **[UI 优化] 交易历史深度量化**:
    - **高精度汇总**: 基金详情页交易历史表头的汇总数据已从整数调整为保留两位小数，提供更精准的持仓回顾。
    - **单行盈亏占比**: 在基金详情的交易历史表格中，为每一笔交易的“浮盈”、“机会收益”和“落袋收益”新增了相对于该笔交易金额（或分红金额）的百分比显示（如 `+86|1.1%`），帮助用户直观评估每一笔操作的择时质量。
    - **无缝表头吸顶**: 优化了基金详情弹窗中交易历史表格的 `sticky` 布局，移除了滚动容器的顶部偏移，使表头在滚动时能够严丝合缝地贴合弹窗顶部 Header。
- **[UI 优化] 隐私遮罩图表顶格显示**:
    - **暗黑模式适配 (最终版)**: 采用“高对比度实色板”逻辑，确保在所有主题下均有极致的清晰度。
    - **指数级颜色衰减**: 隐私模式下的历史数据线透明度遵循 **指数级衰减逻辑**，营造清晰的视觉透视。
- **[收盘持久化] 完整行情存储**:
    - 每天 15:00 收盘后，系统将自动把包含 **09:15-15:00** 完整波动的数据保存至 `localStorage`。
- **[多端同步] Master-Slave 主从协商机制**:
    - **设备唯一性**: 每台设备生成唯一 UUID。
    - **主机锁 (Lease)**: 通过 Gist 的 `sync_metadata.json` 实现分布式锁。最后一次开启“自动同步”的设备成为 **Master**，拥有云端推送权。
    - **自动退化**: 其他设备在刷新页面时，若发现 Master ID 不匹配，会自动关闭 `AUTO_SYNC_ENABLED` 变为 **Slave**，防止误覆盖数据，确保多端同步的安全性。
- **[数据中继] 大盘历史同步**:
    - **无感 Pull**: 启动或刷新时，自动从公共 Gist 拉取最新的大盘历史（`market_history.json`）并与本地合并。
    - **自动 Push**: 每日 15:00 收盘后，首台完成数据采集的设备将自动把最新的历史曲线推送到云端，实现跨设备的大盘走势接力。
